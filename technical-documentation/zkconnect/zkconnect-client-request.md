---
description: Request proofs from your user
---

# zkConnect Client: Request

The [zkConnect](../../what-is-sismo/zkconnect.md) Client is a frontend package built on top of the [Sismo Data Vault app](../data-vault-app.md) (the prover) to easily request proofs from your users. You can see a full guide on how to integrate zkConnect into your application [here](../../tutorials/zkconnect/zk-connect-guide.md).

## Installation

Install zkConnect client package in your frontend with `npm` or `yarn`:

```bash
# with npm
npm install @sismo-core/zk-connect-client
# with yarn
yarn add @sismo-core/zk-connect-client
```

{% hint style="success" %}
Make sure to have at least v18.15.0 as Node version. You can encounter issues with ethers dependencies if not.
{% endhint %}

## Usage

#### Configuration

The first step for integrating zkConnect in your frontend is to create a `zkConnectConfig`. This config will require an `appId` and can be customized with [optional fields.](zkconnect-client-request.md#zkconnectclientconfig) You can go to the [Sismo Factory](https://factory.sismo.io/apps-explorer) to register an appId.

```typescript
import { ZkConnect, ZkConnectClientConfig, DataRequest } from "@sismo-core/zk-connect-client";

const zkConnectConfig: ZkConnectClientConfig = {
  // you will need to register an appId in the Factory
  appId: "0x8f347ca31790557391cec39b06f02dc2", 
}

// create a new ZkConnect instance with the client configuration
const zkConnect = ZkConnect(zkConnectConfig);
```

#### Request proofs from your users for a groupId&#x20;

Request proofs from your users by creating a [`DataRequest`](zkconnect-client-request.md#datarequest) and calling the `request` function of the zkConnect client. Only the `groupId` in the `DataRequest` is mandatory.

```typescript
const DATA_REQUEST = DataRequest({ 
    // ID of the group the user should be a member of
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
});

// The `request` function sends your user to the Sismo Vault App to generate the proof.
// After the proof generation, the user is redirected with it to your app
zkConnect.request({ dataRequest: DATA_REQUEST });
```

#### Get proofs from your users for a groupId

Receive proofs in a `zkConnectResponse` by calling the `getResponse` function when the user is redirected back to your application.&#x20;

```typescript
// The `getResponse` function returns the proof generated by your user 
// after coming back from the Sismo Vault App.
const zkConnectResponse = zkConnect.getResponse();
```

## Documentation

#### **`ZkConnectClientConfig`**

The `ZkConnectClientConfig` allows you to fully customize your zkConnect integration. Its only mandatory field is the `appId`. For more liberty when prototyping, it also comes with an optional devMode field that allows developers to add their addresses and compute cryptographically valid proofs when redirected to the Sismo Developer Vault.

```typescript
export type ZkConnectClientConfig = {
  // the appId registered in the Factory
  appId: string,
  devMode?: {
    // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
    enabled?: boolean, 
    // Will insert this addresses in data groups 
    devAddresses?: string[] | Record<string, Number | BigNumberish> 
  },
  // url of the Sismo Vault App to redirect to
  vaultAppBaseUrl?: string
  // url of the Sismo API used
  sismoApiUrl?: string
}
```

Here is an example of a customized `ZkConnectClientConfig` with a `devMode` enabled and two developer addresses that will be able to generate valid proofs from their developer [Data Vaults](../../what-is-sismo/data-vault.md).

```typescript
const zkConnectConfig: ZkConnectClientConfig = {
  // you will need to register an appId in the Factory
  appId: "0x8f347ca31790557391cec39b06f02dc2", 
  // allows to create valid proofs for specific addresses
  // should only be used when prototyping
  // default: undefined
  devMode?: {
    // will use the Dev Sismo Data Vault https://dev.vault-beta.sismo.io/
    enabled?: true, 
    // overrides any group with these addresses
    devAddresses?: [ 
      "0x123...abc", 
      "0x456...efa"
    ],
    // you can also customize values
    // devAddresses?: {
    //   "0x123...abc": 2,
    //   "0x456...efa": 3
    // },
  },
  // url of the Sismo Vault App to redirect to
  // default: https://vault-beta.sismo.io
  // automatically move to https://dev.vault-beta.sismo.io when devMode.enabled = true
  vaultAppBaseUrl?: "https://dev.vault-beta.sismo.io", 
  // url of the Sismo API used
  // default: https://api.sismo.io
  sismoApiUrl?: "https://api.sismo.io"
}
```

#### `DataRequest`

The DataRequest object holds all the information needed to generate the proofs. When creating a dataRequest, you build `statementRequests` from which `verifiableStatements` will be created when calling `request` function. The proofs are located in those `verifiableStatements`.

```typescript
type DataRequestType = {
    // The statementRequests from which proofs are created
    // for now only one statementRequest is supported
    // you can input it directly or use the optional fields below to build it
    statementRequests: StatementRequest[];
    operator: LogicalOperator | null;
};
type StatementRequest = {
    // The groupId from which the proofs are generated
    groupId: string;
    // The timestamp of the group from which the proofs are generated
    groupTimestamp?: number | "latest";
    // The value used in the statement request
    requestedValue?: number | BigNumberish | "USER_SELECTED_VALUE";
    // the comparator used for the requestedValue
    // can be "GTE" or "EQ"
    comparator?: StatementComparator;
    // The proving scheme used to generate the proof
    provingScheme?: "hydra-s1.2";
    // Some extraData in the statements
    extraData?: any;
};
type DataRequestArgs = Partial<DataRequestType> & Partial<StatementRequest>;
export type DataRequest: (args: DataRequestArgs) => DataRequestType;

export type VerifiableStatement = StatementRequest & {
  // value of the statement regarding the requestedValue and the comparator
  // of the statementRequet
  value: number | BigNumberish;
  // proof for the statement request
  proof: any;
};
```

Here is an example of a customized `DataRequest` that, [when requested](zkconnect-client-request.md#request), will generate a `verifiableStatement` with a proof attached to it for the latest data of the groupId `0x42c768bb8ae79e4c5c05d3b51a4ec74a` . The user should have exactly a value of 2 in this group and the proof will be created with the proving scheme `hydra-s1.2.`

```typescript
const DATA_REQUEST = DataRequest({ 
    // ID of the group the user should be a member of
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
    // timestamp of the data used for the group
    // default: latest
    groupTimestamp?: "latest" 
    // value the user should have in the group
    // default: 1
    requestedvalue?: 2, 
    // comparator for the requested value
    // default: "GTE" -> "greater than or equal"
    comparator?: "EQ",
    // proving scheme used for the proof generation
    // default: hydra-s1.2
    provingScheme?: "hydra-s1.2"
});
zkConnect.request({ dataRequest: DATA_REQUEST });
```

#### `request()`

```typescript
function request({ dataRequest, namespace, callbackPath }: RequestParams): void
```

The `request` function redirects your user to the Sismo Vault App to generate the proof.

```typescript
export type RequestParams = {
  // data Request used to create statementRequests
  dataRequest?: DataRequestType;
  // service from which the proof is requested
  // default: main
  namespace?: string;
  // the path to redirect your users with proofs
  // default: empty
  // example: /custom-callback-path
  callbackPath?: string;
};
```

If no `dataRequest` is provided when calling `request`, the user will be redirected to the Sismo Vault app to generate a proof that he owns a Data Vault. The proof will be located in the `proof` field of an `authProof` instead of a `verifiableStatement`.

```typescript
// you can request a proof of Data Vault ownership like this
zkConnect.request();
```

Here is an example of a customized usage of the request function. You want that your users generate a proof in their Sismo Data Vault that proves you they are a member of the group with id `0x42c768bb8ae79e4c5c05d3b51a4ec74a` with at least of value of 2 in it. This proof should be made for the service named "my-private-poll-1" and when generated you want them to be redirected to the path "https://poll.xyz/call-back-path/my-private-poll-1".

```typescript
const DATA_REQUEST = DataRequest({ 
    groupId: "0x42c768bb8ae79e4c5c05d3b51a4ec74a",
    requestedvalue?: 2, 
    comparator?: "GTE",
});

zkConnect.request({
    dataRequest: DATA_REQUEST,
    namespace: "my-private-poll-1",
    callbackPath: "/call-back-path/my-private-poll-1"
})
```

{% hint style="info" %}
Namespace is highly interesting when you want your users to generate proofs for each service in an app. You can see more information about how to use it in the [zkConnect Server package documentation](zkconnect-server-verify-off-chain.md).&#x20;
{% endhint %}

#### `getResponse()`

```typescript
function getResponse(): ZkConnectResponse | null
```

The `getResponse` function returns the [`ZkConnectResponse`](zkconnect-client-request.md#zkconnectresponse) object containing the `verifiableStatements` with proofs generated by your user after coming back from Sismo Vault App. Proofs must be sent to your backend and verified thanks to the [`@sismo-core/zk-connect-server`](https://www.npmjs.com/package/@sismo-core/zk-connect-server) package.

#### `ZkConnectResponse`

```typescript
type ZkConnectRequest = {
    // the appId registered in the Factory
    appId: string;
    // the dataRequest with the statementRequests
    dataRequest?: DataRequestType;
    // service from which the proof is requested
    namespace?: string;
    // the path to redirect your users with proofs
    callbackPath?: string;
    // zk connect version
    version: string;
};

type ZkConnectResponse = Omit<ZkConnectRequest, "callbackPath" | "dataRequest"> & {
    // proof of a Data Vault ownership (optional)
    // will only be returned if no data Request was specified
    authProof?: AuthProof;
    // statements containing proofs to verify
    verifiableStatements: VerifiableStatement[];
};
```
